{"version":3,"sources":["../src/truncate_text.js"],"names":["define","$","Notification","Repository","Selectors","init","registerEventListeners","root","tt","find","short","collapsableText","observer","ResizeObserver","entries","entry","target","classList","scrollHeight","contentRect","height","each","i","observe","get"],"mappings":"mnCAwBAA,OAAM,iCAAC,CACH,QADG,CAEH,mBAFG,CAGH,4BAHG,CAIH,2BAJG,CAAD,CAKH,SACCC,CADD,CAECC,CAFD,CAGCC,CAHD,CAICC,CAJD,CAKD,CAgCE,MAAO,CACHC,IAAI,CA3BqB,QAAzBC,CAAAA,sBAAyB,EAAW,IAC9BC,CAAAA,CAAI,CAAGN,CAAC,CAAC,QAAD,CADsB,CAE9BO,CAAE,CAAGD,CAAI,CAACE,IAAL,CAAUL,CAAS,CAACM,KAAV,CAAgBC,eAA1B,CAFyB,CAG9BC,CAAQ,CAAG,GAAIC,CAAAA,cAAJ,CAAmB,SAAAC,CAAO,CAAI,kCACzBA,CADyB,QAC3C,2BAA2B,IAAlBC,CAAAA,CAAkB,SACvBA,CAAK,CAACC,MAAN,CAAaC,SAAb,CAAuBF,CAAK,CAACC,MAAN,CAAaE,YAAb,CAA4BH,CAAK,CAACI,WAAN,CAAkBC,MAA9C,CAAuD,KAAvD,CAA+D,QAAtF,EAAgG,WAAhG,CACH,CAH0C,+BAI9C,CAJgB,CAHmB,CASpCZ,CAAE,CAACa,IAAH,CAAQ,SAACC,CAAD,CAAO,CACXV,CAAQ,CAACW,OAAT,CAAiBf,CAAE,CAACgB,GAAH,CAAOF,CAAP,CAAjB,CACH,CAFD,CAeH,CAEM,CAGV,CA7CK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle discussion subscription toggling on a discussion list in\n * the peerforum view.\n *\n * @module     block_peerblock/truncate_text\n * @package    block_peerblock\n * @copyright  2019 Andrew Nicols <andrew@nicols.co.uk>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([\n    'jquery',\n    'core/notification',\n    'block_peerblock/repository',\n    'block_peerblock/selectors',\n], function(\n    $,\n    Notification,\n    Repository,\n    Selectors,\n) {\n\n    /**\n     * Register event listeners for the subscription toggle.\n     *\n     */\n    var registerEventListeners = function() {\n        const root = $('.table');\n        const tt = root.find(Selectors.short.collapsableText);\n        const observer = new ResizeObserver(entries => {\n            for (let entry of entries) {\n                entry.target.classList[entry.target.scrollHeight > entry.contentRect.height ? 'add' : 'remove']('truncated');\n            }\n        });\n\n        tt.each((i) => {\n            observer.observe(tt.get(i));\n        });\n\n        /*root.on('click', Selectors.subscription.toggle, function(e) {\n            e.preventDefault();\n            var toggleElement = $(this);\n            var peerforumId = toggleElement.data('peerforumid');\n            var discussionId = toggleElement.data('discussionid');\n            var subscriptionState = toggleElement.data('targetstate');\n\n            Repository.setDiscussionSubscriptionState(peerforumId, discussionId, subscriptionState)\n                .then()\n                .catch(Notification.exception);\n        });*/\n    };\n\n    return {\n        init: registerEventListeners\n    };\n});\n"],"file":"truncate_text.min.js"}